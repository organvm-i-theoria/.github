{
  "metadata": {
    "project_name": "Personal Digital Infrastructure System",
    "version": "1.0.0",
    "created_at": "2025-01-10T08:00:00Z",
    "last_updated": "2025-01-15T14:30:00Z"
  },
  "context": {
    "current_phase": "phase_03_infrastructure",
    "active_tasks": ["task_045_deploy_kubernetes"],
    "completed_tasks": [
      "task_001_setup_env",
      "task_002_install_deps",
      "task_003_config_database",
      "task_040_build_containers",
      "task_041_test_containers",
      "task_042_push_registry",
      "task_043_configure_network",
      "task_044_setup_loadbalancer"
    ],
    "failed_tasks": ["task_038_security_scan"],
    "session_start": "2025-01-15T11:00:00Z",
    "elapsed_hours": 3.5
  },
  "tasks": {
    "task_001_setup_env": {
      "name": "Setup Development Environment",
      "status": "success",
      "dependencies": [],
      "dependents": ["task_002_install_deps"],
      "completed_at": "2025-01-10T09:30:00Z"
    },
    "task_002_install_deps": {
      "name": "Install Dependencies",
      "status": "success",
      "dependencies": ["task_001_setup_env"],
      "dependents": ["task_003_config_database"],
      "completed_at": "2025-01-10T10:15:00Z"
    },
    "task_003_config_database": {
      "name": "Configure Database",
      "status": "success",
      "dependencies": ["task_002_install_deps"],
      "dependents": ["task_040_build_containers"],
      "completed_at": "2025-01-10T11:45:00Z"
    },
    "task_038_security_scan": {
      "name": "Run Security Scan",
      "status": "failed",
      "dependencies": ["task_003_config_database"],
      "dependents": ["task_050_compliance_check"],
      "error": {
        "type": "ImportError",
        "message": "Module 'bandit' not found. Required for security scanning."
      },
      "failed_at": "2025-01-15T12:30:00Z"
    },
    "task_040_build_containers": {
      "name": "Build Docker Containers",
      "status": "success",
      "dependencies": ["task_003_config_database"],
      "dependents": ["task_041_test_containers"],
      "completed_at": "2025-01-15T13:00:00Z"
    },
    "task_041_test_containers": {
      "name": "Test Containers",
      "status": "success",
      "dependencies": ["task_040_build_containers"],
      "dependents": ["task_042_push_registry"],
      "completed_at": "2025-01-15T13:30:00Z"
    },
    "task_042_push_registry": {
      "name": "Push to Container Registry",
      "status": "success",
      "dependencies": ["task_041_test_containers"],
      "dependents": ["task_045_deploy_kubernetes"],
      "completed_at": "2025-01-15T13:45:00Z"
    },
    "task_043_configure_network": {
      "name": "Configure Network",
      "status": "success",
      "dependencies": ["task_002_install_deps"],
      "dependents": ["task_045_deploy_kubernetes"],
      "completed_at": "2025-01-15T14:00:00Z"
    },
    "task_044_setup_loadbalancer": {
      "name": "Setup Load Balancer",
      "status": "success",
      "dependencies": ["task_043_configure_network"],
      "dependents": ["task_045_deploy_kubernetes"],
      "completed_at": "2025-01-15T14:20:00Z"
    },
    "task_045_deploy_kubernetes": {
      "name": "Deploy to Kubernetes",
      "status": "pending",
      "dependencies": [
        "task_042_push_registry",
        "task_043_configure_network",
        "task_044_setup_loadbalancer"
      ],
      "dependents": ["task_046_verify_deployment", "task_047_setup_monitoring"]
    },
    "task_046_verify_deployment": {
      "name": "Verify Deployment",
      "status": "pending",
      "dependencies": ["task_045_deploy_kubernetes"],
      "dependents": ["task_048_smoke_tests"]
    },
    "task_047_setup_monitoring": {
      "name": "Setup Monitoring",
      "status": "pending",
      "dependencies": ["task_045_deploy_kubernetes"],
      "dependents": ["task_049_configure_alerts"]
    },
    "task_048_smoke_tests": {
      "name": "Run Smoke Tests",
      "status": "pending",
      "dependencies": ["task_046_verify_deployment"],
      "dependents": []
    },
    "task_049_configure_alerts": {
      "name": "Configure Alerts",
      "status": "pending",
      "dependencies": ["task_047_setup_monitoring"],
      "dependents": []
    },
    "task_050_compliance_check": {
      "name": "Compliance Check",
      "status": "pending",
      "dependencies": ["task_038_security_scan"],
      "dependents": []
    }
  },
  "dag": {
    "phases": {
      "phase_01_setup": {
        "name": "Initial Setup",
        "tasks": ["task_001_setup_env", "task_002_install_deps"],
        "status": "completed"
      },
      "phase_02_configuration": {
        "name": "Configuration",
        "tasks": ["task_003_config_database", "task_038_security_scan"],
        "status": "partial"
      },
      "phase_03_infrastructure": {
        "name": "Infrastructure Deployment",
        "tasks": [
          "task_040_build_containers",
          "task_041_test_containers",
          "task_042_push_registry",
          "task_043_configure_network",
          "task_044_setup_loadbalancer",
          "task_045_deploy_kubernetes",
          "task_046_verify_deployment",
          "task_047_setup_monitoring"
        ],
        "status": "in_progress"
      },
      "phase_04_validation": {
        "name": "Validation & Testing",
        "tasks": [
          "task_048_smoke_tests",
          "task_049_configure_alerts",
          "task_050_compliance_check"
        ],
        "status": "pending"
      }
    }
  },
  "error_tracking": {
    "errors": [
      {
        "task_id": "task_038_security_scan",
        "error_type": "ImportError",
        "message": "Module 'bandit' not found. Required for security scanning.",
        "timestamp": "2025-01-15T12:30:00Z",
        "stack_trace": "Traceback (most recent call last):\n  File \"security_scan.py\", line 5, in <module>\n    import bandit\nImportError: No module named 'bandit'",
        "attempted_fixes": ["pip install bandit"]
      }
    ]
  },
  "user_customizations": {
    "runtime_decisions": [
      {
        "prompt": "Use Docker instead of Podman for containers?",
        "decision": {
          "choice": "approved",
          "decided_at": "2025-01-15T11:15:00Z"
        },
        "rationale": "Better Kubernetes integration"
      },
      {
        "prompt": "Skip manual security scan and use automated pipeline?",
        "decision": {
          "choice": "rejected",
          "decided_at": "2025-01-15T12:00:00Z"
        },
        "rationale": "Manual scan required for compliance"
      },
      {
        "prompt": "Proceed with Kubernetes deployment despite failed security scan?",
        "decision": {
          "choice": "pending",
          "decided_at": null
        },
        "rationale": null
      }
    ]
  },
  "filesystem_state": {
    "files": {
      "/project/Dockerfile": {
        "exists": true,
        "required_by": ["task_040_build_containers"],
        "produced_by": "task_001_setup_env"
      },
      "/project/docker-compose.yml": {
        "exists": true,
        "required_by": ["task_040_build_containers"],
        "produced_by": "task_001_setup_env"
      },
      "/project/k8s/deployment.yaml": {
        "exists": true,
        "required_by": ["task_045_deploy_kubernetes"],
        "produced_by": "task_043_configure_network"
      },
      "/project/artifacts/app-image:v1.0.0": {
        "exists": true,
        "required_by": ["task_045_deploy_kubernetes"],
        "produced_by": "task_042_push_registry",
        "size_bytes": 524288000
      },
      "/project/config.yaml": {
        "exists": true,
        "required_by": ["task_045_deploy_kubernetes"],
        "produced_by": "task_003_config_database"
      }
    },
    "disk_usage": {
      "total_bytes": 2147483648,
      "used_bytes": 1073741824,
      "available_bytes": 1073741824
    }
  },
  "environment_config": {
    "system_info": {
      "os": {
        "type": "Ubuntu",
        "version": "22.04"
      },
      "architecture": "x86_64"
    },
    "runtime_environment": {
      "python": {
        "version": "3.9.7",
        "path": "/usr/bin/python3"
      }
    },
    "dependencies": {
      "python_packages": [
        {
          "name": "numpy",
          "version": "1.21.0",
          "required": true
        },
        {
          "name": "pandas",
          "version": "1.3.0",
          "required": true
        },
        {
          "name": "docker",
          "version": "5.0.3",
          "required": true
        },
        {
          "name": "kubernetes",
          "version": "19.15.0",
          "required": true
        }
      ],
      "missing_dependencies": ["bandit"]
    }
  }
}
